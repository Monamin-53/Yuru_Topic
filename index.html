<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ゆるトピ -Yuru Topic-</title>
    <!-- Google Fontsを読み込み -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mochiy+Pop+One&family=Yusei+Magic&display=swap" rel="stylesheet">
    
    <style>
        /* --- 全体のスタイル --- */
        body {
            font-family: 'Yusei Magic', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            background-color: #fffde7; 
            color: #5d4037;
        }

        .container {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 0.5rem;
        }

        /* --- ヘッダー --- */
        header {
            background-color: #a7d8f0; 
            color: #004d40;
            padding: 0.8rem 1.5rem;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        header h1 {
            font-family: 'Mochiy Pop One', sans-serif;
            font-size: 2.3rem;
            font-weight: 400;
            margin: 0;
            letter-spacing: 0.025em;
        }
        header p {
            font-size: 1.0rem;
            margin-top: 0.25rem;
        }

        /* --- カード --- */
        .card {
            position: relative;
            background-color: #ffffff;
            border-radius: 1rem;
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
            padding: 1.5rem;
            width: 98%;
            max-width: 700px;
            margin: 0.5rem auto;
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        .card h2 {
            font-size: 1.3rem;
            font-weight: 400;
            color: #3e2723;
            margin: 0;
        }
        
        /* --- 話題表示エリア --- */
        #topicsDisplay {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            background-color: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 0.75rem;
            padding: 0.75rem;
        }
        .topic-row {
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            padding: 0.5rem;
            border-radius: 0.75rem;
            transition: background-color 0.2s ease-in-out;
            cursor: pointer;
        }
        .topic-row:hover {
            background-color: #f0f9ff;
        }
        .topic-genre-tag {
            background-color: #c8e6c9; 
            color: #2e7d32;
            padding: 0.25rem 0.75rem;
            border-radius: 0.5rem;
            font-size: 0.8rem;
            font-weight: 400;
            width: 95px;
            text-align: center;
            flex-shrink: 0;
            margin-top: 0.1rem;
        }
        .topic-item {
            display: flex;
            align-items: flex-start;
            gap: 0.8rem;
            flex-grow: 1;
        }
        .topic-number {
            font-size: 1.2rem;
            font-weight: 400;
            color: #455a64;
            flex-shrink: 0;
        }
        .topic-text {
            flex-grow: 1;
            font-size: 1rem;
            color: #4e342e;
            word-break: break-word;
            line-height: 1.5;
        }

        /* --- ボタン --- */
        .button {
            padding: 0.7rem 1.2rem;
            border-radius: 0.75rem;
            font-size: 1rem;
            font-weight: 400;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: 2px solid #0288d1;
        }
        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        .button:active {
            transform: translateY(1px);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        #generateTopicsButton {
            background-color: #b3e5fc;
            color: #01579b;
            margin-top: 0.8rem;
        }
        #generateTopicsButton:hover {
            background-color: #81d4fa;
        }

        #copyAllTopicsButton {
            position: absolute;
            top: 1.5rem;
            right: 1.5rem;
            background-color: #b3e5fc;
            color: #01579b;
            padding: 0.5rem 1rem;
            font-size: 0.85rem;
        }
        #copyAllTopicsButton:hover {
            background-color: #81d4fa;
        }

        /* --- その他 --- */
        .message-box {
            background-color: #e1f5fe;
            border: 1px solid #4fc3f7;
            border-radius: 0.5rem;
            padding: 0.7rem;
            font-size: 0.9rem;
            color: #01579b;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
            margin-top: 0.8rem;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .hidden {
            display: none;
        }
        footer {
            background-color: #a7d8f0;
            color: #004d40;
            padding: 1rem;
            text-align: center;
            font-size: 0.85rem;
            margin-top: auto;
        }

        /* --- レスポンシブ対応 --- */
        @media (max-width: 640px) {
            header h1 { font-size: 2rem; }
            header p { font-size: 0.85rem; }
            .card { padding: 1rem; gap: 0.6rem; }
            .card h2 { font-size: 1.1rem; }
            .topic-genre-tag { width: 80px; font-size: 0.7rem; }
            .topic-number { font-size: 1rem; }
            .topic-text { font-size: 0.85rem; }
            #copyAllTopicsButton { top: 1rem; right: 1rem; padding: 0.3rem 0.6rem; font-size: 0.75rem;}
            #topicsDisplay { padding: 0.5rem; }
        }
    </style>
</head>
<body>
    <header>
        <h1>ゆるトピ -Yuru Topic-</h1>
        <p>大学生のための話題探しツール</p>
    </header>

    <div class="container">
        <div class="card">
            <div class="card-header">
                <h2>➀～➃の中から選択 or タップ♪</h2>
                <button id="copyAllTopicsButton" class="button">コピー</button>
            </div>

            <div id="topicsDisplay">
                <!-- 話題がここに表示されます -->
            </div>

            <button id="generateTopicsButton" class="button">全部更新</button>

            <div id="copyMessage" class="message-box hidden">
                <!-- コピー成功メッセージがここに表示されます -->
            </div>
        </div>
    </div>

    <footer>
        <p>&copy; Copyright (c) 2025 もなみん</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const generateTopicsButton = document.getElementById('generateTopicsButton');
            const copyAllTopicsButton = document.getElementById('copyAllTopicsButton');
            const topicsDisplay = document.getElementById('topicsDisplay');
            const copyMessage = document.getElementById('copyMessage');

            const topics = {
                "大学生活": [
                    "サークル、何か入ってる？",
                    "どんな人と友達になりたい？",
                    "理想の大学生活ってどんな感じ？",
                    "この大学に入ったきっかけ、教えて！",
                    "大学に入って「よかったー！」って思うことは？",
                    "お気に入りの授業、ある？",
                    "「この先生、尊敬できるな～」って人いる？",
                    "うちの大学の好きなところ、どこ？",
                    "なんでこの大学を選んだの？",
                    "大学生のうちに、これだけはやっておきたい！ってことある？",
                    "勉強のルーティンはある？",
                    "学割はもう使った？",
                    "初めてのオンライン通話はスムーズにできた？",
                    "挑戦してみたい授業はある？"
                ],
                "自分について": [
                    "自分の「ここがイイ！」ってところ、教えて！",
                    "「この資格、取りたいな～」って思うのある？",
                    "将来、どこに住んでみたい？",
                    "将来の夢とか目標ってある？",
                    "「この人、信頼できる！」ってどんな人？",
                    "「こんなスキル、身につけたいな」って思うのある？",
                    "もし生まれ変われるなら、何になりたい？",
                    "今、チャレンジしてみたいことって何？",
                    "旅行するなら、どこ行きたい？",
                    "お休みの日は、何してることが多い？",
                    "朝型？夜型？どっち？",
                    "いつも買っちゃうおやつ／飲み物ってある？",
                    "自分にキャッチコピーをつけるなら？",
                    "時間があったらやってみたいことは？"
                ],
                "趣味・エンタメ": [
                    "おすすめのご飯屋さん、知らない？",
                    "イチオシの漫画とか本、教えて！",
                    "よく使うAIって何かある？",
                    "自分なりのリラックス方法とか、おすすめグッズある？",
                    "最近、何かワクワクしたことあった？",
                    "ついつい見ちゃうSNSって何？",
                    "最近、何かにハマってる？",
                    "ペット飼うなら、何がいい？",
                    "趣味って、何かある？",
                    "どんな音楽をよく聴く？",
                    "“一人で楽しむ派”と“共有したい派”どっち？",
                    "“ハマる予感がする”今気になっているものは？",
                    "好きなゲームはある？",
                    "本は紙？電子？"
                ],
                "過去・未来": [
                    "10年後、どうなってたい？",
                    "今までで一番楽しかった思い出って何？",
                    "「この夢、絶対叶えたい！」ってことある？",
                    "「この人には感謝してるな～」って人、いる？",
                    "今まででもらって一番うれしかったプレゼントは？",
                    "言われてうれしかった言葉、覚えてる？",
                    "自分の人生のターニングポイントっていつだった？",
                    "子どもの頃の夢、覚えてる？",
                    "思い出の場所ってある？",
                    "過去と未来、どっちに行ってみたい？",
                    "子供の頃の習い事は？",
                    "印象に残っているCMはある？",
                    "初めて見た映画は？",
                    "未来に残ってほしい今の技術は？"
                ],
            };

            let usedTopics = { "大学生活": [], "自分について": [], "趣味・エンタメ": [], "過去・未来": [] };
            let currentDisplayedTopics = [];

            function selectUniqueTopic(genre) {
                let availableTopics = topics[genre].filter(topic => !usedTopics[genre].includes(topic));
                if (availableTopics.length === 0) {
                    usedTopics[genre] = [];
                    availableTopics = topics[genre];
                }
                const randomIndex = Math.floor(Math.random() * availableTopics.length);
                const selectedTopic = availableTopics[randomIndex];
                usedTopics[genre].push(selectedTopic);
                return selectedTopic;
            }

            async function copyToClipboard(text) {
                try {
                    if (navigator.clipboard && window.isSecureContext) {
                        await navigator.clipboard.writeText(text);
                        showCopyMessage('クリップボードにコピーしました！');
                    } else {
                        const tempTextArea = document.createElement('textarea');
                        tempTextArea.value = text;
                        tempTextArea.style.position = 'fixed';
                        tempTextArea.style.left = '-9999px';
                        document.body.appendChild(tempTextArea);
                        tempTextArea.select();
                        document.execCommand('copy');
                        document.body.removeChild(tempTextArea);
                        showCopyMessage('クリップボードにコピーしました！');
                    }
                } catch (err) {
                    showCopyMessage('コピーに失敗しました。');
                }
            }

            function showCopyMessage(message) {
                copyMessage.textContent = message;
                copyMessage.classList.remove('hidden');
                setTimeout(() => {
                    copyMessage.classList.add('hidden');
                }, 2000);
            }
            
            function regenerateSingleTopic(genre, topicRowElement, index) {
                const selectedTopic = selectUniqueTopic(genre);
                const numbering = ['①', '②', '③', '④'];

                if (selectedTopic) {
                    const topicTextSpan = topicRowElement.querySelector('.topic-text');
                    topicTextSpan.textContent = selectedTopic;
                    
                    currentDisplayedTopics[index] = `${numbering[index]} ${selectedTopic}`;
                }
            }
            
            function generateAllTopics() {
                topicsDisplay.innerHTML = '';
                currentDisplayedTopics = [];
                const genreKeys = Object.keys(topics);
                const numbering = ['①', '②', '③', '④'];

                genreKeys.forEach((genre, index) => {
                    const selectedTopic = selectUniqueTopic(genre);
                    if (selectedTopic) {
                        const topicRow = document.createElement('div');
                        topicRow.className = 'topic-row';
                        topicRow.title = 'クリックしてこの話題だけ更新';

                        const genreTag = document.createElement('div');
                        genreTag.className = 'topic-genre-tag';
                        genreTag.textContent = genre;

                        const topicItem = document.createElement('div');
                        topicItem.className = 'topic-item';
                        
                        const numberSpan = document.createElement('span');
                        numberSpan.className = 'topic-number';
                        numberSpan.textContent = numbering[index];

                        const textSpan = document.createElement('span');
                        textSpan.className = 'topic-text';
                        textSpan.textContent = selectedTopic;

                        topicItem.appendChild(numberSpan);
                        topicItem.appendChild(textSpan);
                        
                        topicRow.appendChild(genreTag);
                        topicRow.appendChild(topicItem);
                        topicsDisplay.appendChild(topicRow);
                        
                        const fullTopicText = `${numbering[index]} ${selectedTopic}`;
                        currentDisplayedTopics.push(fullTopicText);

                        topicRow.addEventListener('click', () => {
                            regenerateSingleTopic(genre, topicRow, index);
                        });
                    }
                });
            }

            generateTopicsButton.addEventListener('click', generateAllTopics);
            copyAllTopicsButton.addEventListener('click', () => {
                if (currentDisplayedTopics.length > 0) {
                    copyToClipboard(currentDisplayedTopics.join('\n'));
                } else {
                    showCopyMessage('コピーする話題がありません。');
                }
            });

            generateAllTopics();
        });
    </script>
</body>
</html>
